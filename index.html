<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Install-drupal--lamp-style- : 於 Ubuntu 上安裝 Drupal (LAMP 架構)" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Install-drupal--lamp-style-</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/meyu/Install-Drupal-on-Ubuntu--LAMP-STYLE-">View on GitHub</a>

          <h1 id="project_title">Install-drupal--lamp-style-</h1>
          <h2 id="project_tagline">於 Ubuntu 上安裝 Drupal (LAMP 架構)</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/meyu/Install-Drupal-on-Ubuntu--LAMP-STYLE-/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/meyu/Install-Drupal-on-Ubuntu--LAMP-STYLE-/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="%E6%89%80%E7%82%BA%E4%BD%95%E4%BE%86" class="anchor" href="#%E6%89%80%E7%82%BA%E4%BD%95%E4%BE%86"><span class="octicon octicon-link"></span></a>所為何來</h1>

<p>以 Drupal 搭配 Ubuntu、Apache、MySQL、PHP 來架設網站 (即 LAMP)。<br>
本文使用 Ubuntu 的 Drupal-LAMP 套裝指令，能簡單又快速地完成架設；但皆採用預設值安裝，在安全性及效能上較難盡人意，僅推薦做為短期服務的網站；欲架設網站長期經營者，不推薦使用此方法，或請自行微調各項設定。</p>

<h1>
<a name="%E9%81%A9%E7%94%A8%E7%92%B0%E5%A2%83" class="anchor" href="#%E9%81%A9%E7%94%A8%E7%92%B0%E5%A2%83"><span class="octicon octicon-link"></span></a>適用環境</h1>

<p>作業系統：Ubuntu 12.04 (Server &amp; Desktop)<br>
網頁伺服器：Apache 2.2<br>
資料庫系統：MySQL 5.5<br>
指令碼語言：PHP 5.3<br>
資料庫管理介面：phpMyAdmin 4<br>
內容管理系統：Drupal 7.23</p>

<h1>
<a name="%E5%AE%89%E8%A3%9D%E6%96%B9%E5%BC%8F" class="anchor" href="#%E5%AE%89%E8%A3%9D%E6%96%B9%E5%BC%8F"><span class="octicon octicon-link"></span></a>安裝方式</h1>

<h3>
<a name="%E9%80%B2%E8%A1%8C-lamp-%E6%9E%B6%E6%A7%8B%E7%9A%84%E5%AE%89%E8%A3%9D%E5%8F%8A%E8%A8%AD%E5%AE%9A" class="anchor" href="#%E9%80%B2%E8%A1%8C-lamp-%E6%9E%B6%E6%A7%8B%E7%9A%84%E5%AE%89%E8%A3%9D%E5%8F%8A%E8%A8%AD%E5%AE%9A"><span class="octicon octicon-link"></span></a>進行 LAMP 架構的安裝及設定</h3>

<p>於終端機中，輸入以下指令來更新 Ubuntu 並安裝 Drupal 所需之伺服器元件：</p>

<div class="highlight"><pre>sudo aptitude update <span class="o">&amp;&amp;</span> sudo aptitude upgrade <span class="o">&amp;&amp;</span>
sudo aptitude install drupal7
</pre></div>

<p>安裝過程中，請設定 MySQL 的 root (最高權限管理者) 的密碼：<br>
(本文使用 <code>root.password</code> 做為 root 的密碼)<br><img src="https://lh5.googleusercontent.com/-C7DmC1wJ5RY/Ugxmh7Rh29I/AAAAAAAAf48/Q6kToP6w0YQ/w850-h567-no/01+Set+Password+for+MySQL+root.jpg" alt="Set Password for MySQL root"></p>

<p>設定電子郵件伺服器：<br>
(請依需求自行設定，本文選擇不設定)<br><img src="https://lh3.googleusercontent.com/-Q_BFwKU3lHc/Ugxmhx_Do5I/AAAAAAAAf44/vzDUo7Y1jDU/w819-h546-no/02+Choose+No+configuration+for+Mail+Service.jpg" alt="Choose No Configuration for Mail Service"></p>

<p>選擇 Yes 以使用 Drupal 的 MySQL 預設套裝設定：<br><img src="https://lh6.googleusercontent.com/-MbHCb1rNbRM/Ugxmhz4uzhI/AAAAAAAAf40/VBRDsFlGdwM/w787-h546-no/03+Configure+Database+for+Drupal.jpg" alt="Configure Database for Drupal"></p>

<p>選擇 MySQL 做為資料庫系統：<br><img src="https://lh3.googleusercontent.com/-1dlx88_ephk/Ugxmi90VasI/AAAAAAAAf5Q/f0w5NA5IIOY/w819-h546-no/04+Choose+MySQL+Database+Type.jpg" alt="Choose MySQL Database System"></p>

<p>輸入 MySQL 的 root 密碼，以提供設定的權限：(本文範例 <code>root.password</code>)<br><img src="https://lh3.googleusercontent.com/-FQKXdFSrGmg/Ugxmi7ZFS0I/AAAAAAAAf5U/WAA6m_39lc4/w819-h546-no/05+Use+root+Password+to+Setup+Drupal.jpg" alt="Use root Password to Setup Drupal"></p>

<p>設定 Drupal 存取 MySQL 的密碼：<br>
(本文使用 <code>drupal.password</code> 做為 drupal 的存取密碼)<br><img src="https://lh4.googleusercontent.com/-ZfyIxA_N4L4/Ugxmi6_WgDI/AAAAAAAAf5M/WbLdqYgfbnk/w819-h546-no/06+Set+Password+for+Drupal.jpg" alt="Set Password for Drupal"></p>

<p>以上作業完成後，請安裝 phpMyAdmin：</p>

<div class="highlight"><pre>sudo aptitude install phpmyadmin
</pre></div>

<p>選擇 Yes 以預設值安裝：<br><img src="https://lh6.googleusercontent.com/-fgSb2S3M1yk/Ugxmjh8xWlI/AAAAAAAAf50/8PrmzAR2ufI/w819-h546-no/07+Configure+Database+for+phpMyAdmin.jpg" alt="Configure Database for phpMyAdmin"></p>

<p>輸入 MySQL 的 root 密碼，以提供設定的權限：(本文範例 <code>root.password</code>)<br><img src="https://lh3.googleusercontent.com/-9dJk5jNetSI/UgxmkL2odsI/AAAAAAAAf5w/SpWE7to7aqc/w819-h546-no/08+Use+root+Password+to+Setup+phpMyAdmin.jpg" alt="Use root Password to Setup phpMyAdmin"></p>

<p>設定 phpMyAdmin 存取 MySQL 的密碼：<br>
(本文使用 <code>phpmyadmin.password</code>)<br><img src="https://lh6.googleusercontent.com/-po92ErgW2Y4/UgxmkJQ7QkI/AAAAAAAAf5s/NipA4TLvmgA/w819-h546-no/09+Set+Password+for+phpMyAdmin.jpg" alt="Set Password for phpMyAdmin"></p>

<p>選擇 apache2 做為網頁伺服器：<br><img src="https://lh5.googleusercontent.com/-ZVDE-nWWWog/Ugxmklcc32I/AAAAAAAAf54/9VaDdNfxkXk/w819-h546-no/10+Choose+Apache.jpg" alt="Choose Apache"></p>

<p>放置 phpMyAdmin 的頁面路徑，並移除不必要檔案：</p>

<div class="highlight"><pre><span class="nb">cd</span> /var/www/ <span class="o">&amp;&amp;</span> sudo ln -s /usr/share/phpmyadmin <span class="o">&amp;&amp;</span> 
sudo rm index.html <span class="o">&amp;&amp;</span> 
<span class="nb">cd</span>
</pre></div>

<h3>
<a name="%E9%80%B2%E8%A1%8C-drupal-%E7%9A%84%E5%AE%89%E8%A3%9D" class="anchor" href="#%E9%80%B2%E8%A1%8C-drupal-%E7%9A%84%E5%AE%89%E8%A3%9D"><span class="octicon octicon-link"></span></a>進行 Drupal 的安裝</h3>

<p>請下載 Drupal，並解壓縮至 /var/www/drupal 資料夾：<br>
(本文使用 <code>drupal-7.23.tar.gz</code>，請自行更換為所需版本)</p>

<div class="highlight"><pre>wget http://ftp.drupal.org/files/projects/drupal-7.23.tar.gz <span class="o">&amp;&amp;</span>
tar zxvf drupal-7.23.tar.gz <span class="o">&amp;&amp;</span> rm drupal-7.23.tar.gz <span class="o">&amp;&amp;</span>
sudo mv drupal-7.23/ /var/www/tab/
</pre></div>

<p>另請注意，/var/www/<code>tab</code> 中，<code>tab</code> 即本次要建立之網站代號，亦將成為 URL 路徑，請依喜好自行命名 (請使用不含空格的英文字母命名)。<br>
接下來，請為這個 <code>tab</code> 網站製作設定檔，並設定網站資料夾的權限：<br>
(一樣請注意，請自行更名所有 /var/www/<code>tab</code> 路徑中的 <code>tab</code>)</p>

<div class="highlight"><pre>cp /var/www/tab/sites/default/default.settings.php /var/www/tab/sites/default/settings.php <span class="o">&amp;&amp;</span> 
mkdir /var/www/tab/sites/default/files <span class="o">&amp;&amp;</span> 
chmod -R 775 /var/www/tab/ <span class="o">&amp;&amp;</span> 
chmod -R 777 /var/www/tab/sites/default/files/ <span class="o">&amp;&amp;</span> 
chmod 777 /var/www/tab/sites/default/settings.php <span class="o">&amp;&amp;</span> 
sudo chown -R www-data:www-data /var/www/tab/
</pre></div>

<h3>
<a name="%E5%BB%BA%E7%AB%8B%E7%B6%B2%E7%AB%99%E6%89%80%E9%9C%80%E4%B9%8B%E8%B3%87%E6%96%99%E5%BA%AB" class="anchor" href="#%E5%BB%BA%E7%AB%8B%E7%B6%B2%E7%AB%99%E6%89%80%E9%9C%80%E4%B9%8B%E8%B3%87%E6%96%99%E5%BA%AB"><span class="octicon octicon-link"></span></a>建立網站所需之資料庫</h3>

<p>本步驟將於 MySQL 中建立 <code>tab</code> 網站所要依存之資料庫。  </p>

<p>請以 root 身份登入 MySQL，並建立 <code>tab</code> 資料庫予 <code>tab</code> 網站使用：</p>

<div class="highlight"><pre>mysqladmin -u root -p create tab <span class="o">&amp;&amp;</span> 
mysql -u root -p
</pre></div>

<p>過程中，會詢問 root 的密碼以取得操作權限。(本文之 root 密碼為 <code>root.password</code>)<br>
這裡要提醒的是，資料庫名稱不一定要與網站名一樣，但建議採用相同名稱，較易於聯想。  </p>

<p>接著，指派 <code>tab</code> 資料庫的管理者，並設定此資料庫的存取密碼：<br>
(本文指派 root 來管理 <code>tab</code> 資料庫，並將 <code>tab</code> 資料庫的存取密碼設定為 <code>tab.password</code>)</p>

<div class="highlight"><pre><span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">INSERT</span><span class="p">,</span> <span class="k">UPDATE</span><span class="p">,</span> <span class="k">DELETE</span><span class="p">,</span> <span class="k">CREATE</span><span class="p">,</span> <span class="k">DROP</span><span class="p">,</span> <span class="k">INDEX</span><span class="p">,</span> <span class="k">ALTER</span><span class="p">,</span> <span class="k">CREATE</span> <span class="n">TEMPORARY</span> <span class="kp">TABLES</span><span class="p">,</span> 
<span class="k">LOCK</span> <span class="kp">TABLES</span> <span class="k">ON</span> <span class="n">tab</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'tab.password'</span><span class="p">;</span>
</pre></div>

<p>再次提醒，<code>LOCK TABLES ON tab.*</code> 中的 <code>tab</code>，即為所要指定的 <code>tab</code> 網站資料庫，請自行更名；行末 <code>IDENTIFIED BY 'tab.password';</code> 中的 <code>tab.password</code> 也請自行替換。<br>
套用權限設定後，登出 MySQL：</p>

<div class="highlight"><pre><span class="n">FLUSH</span> <span class="n">PRIVILEGES</span><span class="p">;</span> <span class="o">&amp;</span> <span class="err">\</span><span class="n">q</span>
</pre></div>

<p>重新啟動 Apache</p>

<div class="highlight"><pre>sudo /etc/init.d/apache2 restart
</pre></div>

<h3>
<a name="%E5%95%9F%E7%94%A8%E7%B6%B2%E7%AB%99" class="anchor" href="#%E5%95%9F%E7%94%A8%E7%B6%B2%E7%AB%99"><span class="octicon octicon-link"></span></a>啟用網站</h3>

<p>於瀏覽器開啟：<a href="http://localhost/tab/">http://localhost/<code>tab</code>/</a><br>
(以遠端登入網站伺服器者，請將 URL 中的 <code>localhost</code> 更名為該伺服器之 IP 或 Domain)<br><img src="https://lh5.googleusercontent.com/-DT3tbGbLDC4/UgxmlX95lqI/AAAAAAAAf6Q/TY7d7fgOW6g/w918-h487-no/11+Choose+Profile.jpg" alt="Choose Profile"></p>

<p>選擇偏好的語言：<br><img src="https://lh3.googleusercontent.com/-i2cdLfsEUZo/UgxmlXgbJoI/AAAAAAAAf6M/FAj_hY9iiFg/w918-h487-no/12+Choose+Language.jpg" alt="Choose Language"></p>

<p>請輸入這個網站的資料庫名稱、資料庫管理者名稱及密碼，以連接資料庫：<br>
(本文的網站資料庫為 <code>tab</code>、管理者為 <code>root</code>、密碼為 <code>tab.password</code>)<br><img src="https://lh3.googleusercontent.com/-F0LiFPF5ywQ/UgxmlYigh7I/AAAAAAAAf6I/YPtFA6W2kEw/w887-h546-no/13+Set+Connection+to+Web+Database.jpg" alt="Set Connection to Web Database"></p>

<p>設定網站管理者帳密 (並非資料庫管理者)：<br>
(本文設定網站管理者帳號為 <code>web.admin</code>、密碼為 <code>web.password</code>、Email為 <code>web＠tab.com</code>)<br><img src="https://lh5.googleusercontent.com/-Vqx6SqQVh6M/UgxmmU24B9I/AAAAAAAAf6s/qphUHeHY92A/w384-h546-no/14+Set+Site+Information.jpg" alt="Set Site Information">
也請順手設定一下國家、時區及更新通知。<br>
完成無誤時：<br><img src="https://lh5.googleusercontent.com/-mwg5ytSXjRc/UgxmmfnSCGI/AAAAAAAAf6k/z4B-SRMDg_Y/w918-h479-no/15+Finished+Info.jpg" alt="Finished Info">
新網站，什麼都沒有，請開工吧～<br><img src="https://lh3.googleusercontent.com/-mpjYLzMoj3s/UgxmmU0G29I/AAAAAAAAf6g/YlvjqSHa4a4/w816-h546-no/16+Browse+the+Site.jpg" alt="Browse the Site">
DONE.
<br><br></p>

<h1>
<a name="%E8%A3%9C%E5%85%85%E8%AA%AA%E6%98%8E" class="anchor" href="#%E8%A3%9C%E5%85%85%E8%AA%AA%E6%98%8E"><span class="octicon octicon-link"></span></a>補充說明</h1>

<ul>
<li>
<strong>本文網站設定資訊</strong>

<ul>
<li>本機資料夾：<code>/var/www/tab/</code>
</li>
<li>本機網址：<a href="http://localhost/tab/">http://localhost/tab/</a>
</li>
<li>管理者：<code>web.admin</code>
</li>
<li>密碼：<code>web.password</code>
</li>
</ul>
</li>
<li>
<strong>本文資料庫設定</strong>

<ul>
<li>管理頁面入口：<a href="http://localhost/phpmyadmin/">http://localhost/phpmyadmin/</a>
</li>
<li>資料庫系統管理者 <code>root</code>，密碼 <code>root.password</code>
</li>
<li>Drupal資料管理者 <code>root</code>，密碼 <code>drupal.password</code>
</li>
<li>phpMyAdmin管理者 <code>root</code>，密碼 <code>phpmyadmin.password</code>
</li>
<li>
<code>tab</code>網站資料庫管理者 <code>root</code>，密碼 <code>tab.password</code>
</li>
</ul>
</li>
<li>
<strong>基本資安補強</strong>

<ul>
<li>不需遠端登入資料庫時，請：<code>sudo rm /var/www/phpmyadmin</code>，反之，可：<code>cd /var/www/ &amp;&amp; sudo ln -s /usr/share/phpmyadmin</code>
</li>
</ul>
</li>
</ul><h1>
<a name="%E5%8F%83%E8%80%83%E8%B3%87%E6%BA%90" class="anchor" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%BA%90"><span class="octicon octicon-link"></span></a>參考資源</h1>

<ul>
<li><a href="https://help.ubuntu.com/community/Drupal">Drupal - Community Ubuntu Documentation</a></li>
<li><a href="https://drupal.org/project/drupal">Drupal core | drupal.org</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Install-drupal--lamp-style- maintained by <a href="https://github.com/meyu">meyu</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
